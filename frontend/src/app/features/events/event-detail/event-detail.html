@if (store.loading()) {
  <div class="loading-overlay">
    <p>Cargando detalles...</p>
  </div>
}

@if (store.selectedEvent(); as event) {
  @if (showDeleteModal()) {
    <app-confirm-modal 
      title="Eliminar Evento"
      message="Â¿EstÃ¡s seguro de que quieres borrar este evento?"
      (confirmed)="confirmDelete($event, event.id)"
    />
  }
  <div class="detail-wrapper" style="position: relative;">
    
    @if (store.successMessage()) {
      <div class="success-toast">
        <span class="icon">ğŸ‰</span>
        {{ store.successMessage() }}
      </div>
    }

    @if (store.error()) {
      <div class="error-toast">
        <span class="icon">âŒ</span>
        {{ store.error() }}
      </div>
    }

    <article class="detail-card">
      <div class="back-navigation">
        <button (click)="goBack()" class="btn-back">
          <span class="icon">â†</span> Volver al listado
        </button>
      </div>
      <header class="detail-header">
          <h1>{{ event.name }}</h1>
          <span class="badge" [class]="event.status.toLowerCase()">
            {{ getStatusLabel(event.status) }}
          </span>
        </header>

      <section class="detail-body">
        <p class="description">{{ event.description }}</p>
        <div class="speaker-info">
          <span class="label">Ponente Principal: </span>
          <span class="speaker-name">{{ event.speaker_name || 'Por confirmar' }}</span>
        </div>
        
        <div class="info-grid">
          <div class="info-item">
            <span class="label">ğŸ“… Fecha y Hora</span>
            <span class="value">{{ event.start_date | date:'medium' }}</span>
          </div>
          <div class="info-item">
            <span class="label">ğŸ‘¥ Capacidad</span>
            <span class="value">{{ event.capacity }} asistentes</span>
          </div>
        </div>
      </section>

      <footer class="detail-footer">
        <div class="actions-group">
          @if (store.isAlreadyRegistered()) {
            <div class="already-registered-msg">âœ… Ya estÃ¡s registrado</div>
          } 
          @else {
            <button class="btn-register" 
                    [disabled]="isRegisterDisabled(event)"
                    (click)="onRegister()">
              Registrarse
            </button>
          }

          @if (canEdit()) {
            <button class="btn-edit-secondary" (click)="onEdit(event.id)">âœï¸ Editar</button>
            <button class="btn-delete" (click)="onDelete()">ğŸ—‘ï¸ Eliminar</button>
          }
        </div>
      </footer>
    </article>
  </div>
}